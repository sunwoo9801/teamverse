{"ast":null,"code":"import axios from \"axios\";\nconst API_BASE_URL = \"http://localhost:8082\";\nexport const registerUser = async userData => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/register`, userData);\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || \"ÌöåÏõêÍ∞ÄÏûÖ Ïã§Ìå®\";\n  }\n};\n\n//Î°úÍ∑∏Ïù∏ ÌõÑ Access TokenÏùÑ localStorageÏóê Ï†ÄÏû•\nexport const login = async (email, password) => {\n  try {\n    const response = await axios.post(\"http://localhost:8082/api/user/login\", {\n      email,\n      password\n    });\n\n    // ‚úÖ Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ ÌõÑ Access TokenÏùÑ localStorageÏóê Ï†ÄÏû•\n    localStorage.setItem(\"accessToken\", response.data.accessToken);\n    return response.data;\n  } catch (error) {\n    console.error(\"‚ùå Î°úÍ∑∏Ïù∏ Ïã§Ìå®:\", error);\n    return null;\n  }\n};\nexport const loginUser = async loginData => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/login`, loginData, {\n      withCredentials: true // ‚úÖ Ïø†ÌÇ§ Í∏∞Î∞ò Ïù∏Ï¶ù ÏÇ¨Ïö©\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || \"Î°úÍ∑∏Ïù∏ Ïã§Ìå®\";\n  }\n};\n\n/** Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÎ•º ÏÑúÎ≤ÑÏóêÏÑú ÏßÅÏ†ë Ï°∞ÌöåÌïòÎäî Î∞©Ïãù */\nexport const getUserInfo = async () => {\n  try {\n    // ‚úÖ Ïø†ÌÇ§ÏóêÏÑú accessToken Ï∂îÏ∂ú\n    const cookies = document.cookie.split(\"; \").reduce((acc, cookie) => {\n      const [key, value] = cookie.split(\"=\");\n      acc[key] = value;\n      return acc;\n    }, {});\n    if (!cookies.accessToken) {\n      console.warn(\"‚õîÔ∏è accessToken ÏóÜÏùå: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏöîÏ≤≠ Ïïà Ìï®\");\n      return null;\n    }\n\n    // ‚úÖ Authorization Ìó§ÎçîÏóê JWT Ìè¨Ìï®\n    const response = await axios.get(`${API_BASE_URL}/api/user`, {\n      withCredentials: true,\n      headers: {\n        Authorization: `Bearer ${cookies.accessToken}`\n      }\n    });\n    return response.data; // ‚úÖ Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î∞òÌôò\n  } catch (error) {\n    var _error$response3;\n    if (error.response && error.response.status === 403) {\n      console.warn(\"‚õîÔ∏è Î°úÍ∑∏Ïù∏ÎêòÏßÄ ÏïäÏùå: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏöîÏ≤≠ÏùÑ Ï§ëÎã®Ìï©ÎãàÎã§.\");\n      return null;\n    }\n    console.error(\"üî¥ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï°∞Ìöå Ïã§Ìå®:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error);\n    return null;\n  }\n};\n\n// export const logoutUser = async () => {\n//   try {\n//     await axios.post(`${API_BASE_URL}/api/user/logout`, {}, { withCredentials: true });\n//   } catch (error) {\n//     console.error(\"Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®\", error);\n//   }\n// }\nexport const logoutUser = async () => {\n  try {\n    await axios.post(\"http://localhost:8082/api/user/logout\", {}, {\n      withCredentials: true\n    });\n\n    // Access Token Ïø†ÌÇ§ ÏÇ≠Ï†ú (Ïø†ÌÇ§ Í∞ïÏ†ú ÎßåÎ£å)\n    document.cookie = \"accessToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;\";\n    return true; // Î°úÍ∑∏ÏïÑÏõÉ ÏÑ±Í≥µ\n  } catch (error) {\n    console.error(\"Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®\", error);\n    return false;\n  }\n};\nexport const refreshToken = async () => {\n  try {\n    // Ïø†ÌÇ§ÏóêÏÑú refreshTokenÏù¥ ÏûàÎäîÏßÄ ÌôïÏù∏ ÌõÑ ÏöîÏ≤≠\n    const cookies = document.cookie.split(\"; \").reduce((acc, cookie) => {\n      const [key, value] = cookie.split(\"=\");\n      acc[key] = value;\n      return acc;\n    }, {});\n    if (!cookies.refreshToken) {\n      console.warn(\"‚õîÔ∏è refreshToken ÏóÜÏùå: ÌÜ†ÌÅ∞ Í∞±Ïã† ÏöîÏ≤≠ÌïòÏßÄ ÏïäÏùå\");\n      return null; // ÏöîÏ≤≠ÌïòÏßÄ ÏïäÍ≥† Ï¢ÖÎ£å\n    }\n\n    // refreshTokenÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÏöîÏ≤≠\n    const response = await axios.post(`${API_BASE_URL}/api/user/token/refresh`, {}, {\n      withCredentials: true\n    });\n    console.log(\"üü¢ ÌÜ†ÌÅ∞ Í∞±Ïã† ÏÑ±Í≥µ:\", response.data.accessToken);\n    return response.data.accessToken;\n  } catch (error) {\n    var _error$response4;\n    console.error(\"üî¥ ÌÜ†ÌÅ∞ Í∞±Ïã† Ïã§Ìå®:\", ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error);\n    return null;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","registerUser","userData","response","post","data","error","_error$response","login","email","password","localStorage","setItem","accessToken","console","loginUser","loginData","withCredentials","_error$response2","getUserInfo","cookies","document","cookie","split","reduce","acc","key","value","warn","get","headers","Authorization","_error$response3","status","logoutUser","refreshToken","log","_error$response4"],"sources":["C:/project2/teamverse-2/src/api/authApi.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_BASE_URL = \"http://localhost:8082\";\r\n\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/register`, userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || \"ÌöåÏõêÍ∞ÄÏûÖ Ïã§Ìå®\";\r\n  }\r\n};\r\n\r\n//Î°úÍ∑∏Ïù∏ ÌõÑ Access TokenÏùÑ localStorageÏóê Ï†ÄÏû•\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const response = await axios.post(\"http://localhost:8082/api/user/login\", { email, password });\r\n    \r\n    // ‚úÖ Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ ÌõÑ Access TokenÏùÑ localStorageÏóê Ï†ÄÏû•\r\n    localStorage.setItem(\"accessToken\", response.data.accessToken);\r\n    \r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"‚ùå Î°úÍ∑∏Ïù∏ Ïã§Ìå®:\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n\r\nexport const loginUser = async (loginData) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/login`, loginData, {\r\n      withCredentials: true, // ‚úÖ Ïø†ÌÇ§ Í∏∞Î∞ò Ïù∏Ï¶ù ÏÇ¨Ïö©\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || \"Î°úÍ∑∏Ïù∏ Ïã§Ìå®\";\r\n  }\r\n};\r\n\r\n/** Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÎ•º ÏÑúÎ≤ÑÏóêÏÑú ÏßÅÏ†ë Ï°∞ÌöåÌïòÎäî Î∞©Ïãù */\r\nexport const getUserInfo = async () => {\r\n  try {\r\n    // ‚úÖ Ïø†ÌÇ§ÏóêÏÑú accessToken Ï∂îÏ∂ú\r\n    const cookies = document.cookie.split(\"; \").reduce((acc, cookie) => {\r\n      const [key, value] = cookie.split(\"=\");\r\n      acc[key] = value;\r\n      return acc;\r\n    }, {});\r\n\r\n    if (!cookies.accessToken) {\r\n      console.warn(\"‚õîÔ∏è accessToken ÏóÜÏùå: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏöîÏ≤≠ Ïïà Ìï®\");\r\n      return null;\r\n    }\r\n\r\n    // ‚úÖ Authorization Ìó§ÎçîÏóê JWT Ìè¨Ìï®\r\n    const response = await axios.get(`${API_BASE_URL}/api/user`, {\r\n      withCredentials: true, \r\n      headers: {\r\n        Authorization: `Bearer ${cookies.accessToken}`\r\n      }\r\n    });\r\n    return response.data; // ‚úÖ Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î∞òÌôò\r\n  } catch (error) {\r\n    if (error.response && error.response.status === 403) {\r\n      console.warn(\"‚õîÔ∏è Î°úÍ∑∏Ïù∏ÎêòÏßÄ ÏïäÏùå: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏöîÏ≤≠ÏùÑ Ï§ëÎã®Ìï©ÎãàÎã§.\");\r\n      return null;\r\n    }\r\n    console.error(\"üî¥ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï°∞Ìöå Ïã§Ìå®:\", error.response?.data || error);\r\n    return null;\r\n  }\r\n\r\n};\r\n\r\n\r\n\r\n// export const logoutUser = async () => {\r\n//   try {\r\n//     await axios.post(`${API_BASE_URL}/api/user/logout`, {}, { withCredentials: true });\r\n//   } catch (error) {\r\n//     console.error(\"Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®\", error);\r\n//   }\r\n// }\r\nexport const logoutUser = async () => {\r\n  try {\r\n    await axios.post(\"http://localhost:8082/api/user/logout\", {}, { withCredentials: true });\r\n\r\n    // Access Token Ïø†ÌÇ§ ÏÇ≠Ï†ú (Ïø†ÌÇ§ Í∞ïÏ†ú ÎßåÎ£å)\r\n    document.cookie = \"accessToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;\";\r\n\r\n    return true; // Î°úÍ∑∏ÏïÑÏõÉ ÏÑ±Í≥µ\r\n  } catch (error) {\r\n    console.error(\"Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìå®\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\n\r\nexport const refreshToken = async () => {\r\n  try {\r\n    // Ïø†ÌÇ§ÏóêÏÑú refreshTokenÏù¥ ÏûàÎäîÏßÄ ÌôïÏù∏ ÌõÑ ÏöîÏ≤≠\r\n    const cookies = document.cookie.split(\"; \").reduce((acc, cookie) => {\r\n      const [key, value] = cookie.split(\"=\");\r\n      acc[key] = value;\r\n      return acc;\r\n    }, {});\r\n\r\n    if (!cookies.refreshToken) {\r\n      console.warn(\"‚õîÔ∏è refreshToken ÏóÜÏùå: ÌÜ†ÌÅ∞ Í∞±Ïã† ÏöîÏ≤≠ÌïòÏßÄ ÏïäÏùå\");\r\n      return null; // ÏöîÏ≤≠ÌïòÏßÄ ÏïäÍ≥† Ï¢ÖÎ£å\r\n    }\r\n\r\n    // refreshTokenÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÏöîÏ≤≠\r\n    const response = await axios.post(`${API_BASE_URL}/api/user/token/refresh`, {}, { withCredentials: true });\r\n    console.log(\"üü¢ ÌÜ†ÌÅ∞ Í∞±Ïã† ÏÑ±Í≥µ:\", response.data.accessToken);\r\n    return response.data.accessToken;\r\n  } catch (error) {\r\n    console.error(\"üî¥ ÌÜ†ÌÅ∞ Í∞±Ïã† Ïã§Ìå®:\", error.response?.data || error);\r\n    return null;\r\n  }\r\n\r\n  \r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}